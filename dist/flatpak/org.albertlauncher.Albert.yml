app-id: org.albertlauncher.Albert
runtime: org.kde.Platform
runtime-version: '6.6'
sdk: org.kde.Sdk
command: bootstrap-albert.sh
rename-desktop-file: albert.desktop
rename-icon: albert
copy-icon: true
finish-args:
  - --device=dri
  - --filesystem=host:ro
  - --filesystem=host-os
  - --filesystem=home:ro
  - --filesystem=xdg-cache
  - --filesystem=xdg-config
  - --filesystem=xdg-documents
  - --share=ipc
  - --share=network
  - --socket=session-bus
  - --socket=wayland
  - --socket=x11

modules:
  - name: Albert
    buildsystem: cmake-ninja
    builddir: true
#    prefix: /usr
    post-install:
      - echo 'PATH=$PATH:/run/host/bin albert -p /app/lib/albert "$@"' > /app/bin/bootstrap-albert.sh
      - chmod +x /app/bin/bootstrap-albert.sh
    config-opts:
      - -DCMAKE_BUILD_TYPE=Debug
      - -DBUILD_CALCULATOR_QALCULATE=OFF
      - -DBUILD_PYTHON=OFF
      - -DBUILD_APPLICATIONS=OFF
      - -DCMAKE_VERBOSE_MAKEFILE=TRUE
    sources:
      - type: dir
        path: ../..
      #- type: archive
      #  url: https://github.com/albertlauncher/albert/releases/download/v0.23.0/v0.23.0.tar.gz
      #  sha256: 537761dafe1b69e8d93bf23d1dad3bdcd1f578001133bd88c55705d8c59e4edd
      #- type: git
      #  url: https://github.com/albertlauncher/albert
      #  branch: main

##    modules:
##      - name: pybind11
##        buildsystem: cmake-ninja
##        builddir: true
##        sources:
##          - type: git
##            url: https://github.com/pybind/pybind11
##            branch: v2.10.4
##        modules:
##          - name: cpython
##            build-options:
##              cflags: -fPIC
##              ldflags: -fpic
##            sources:
##              - type: archive
##                url: https://www.python.org/ftp/python/3.10.10/Python-3.10.10.tar.xz
##                md5: 7bf85df71bbe7f95e5370b983e6ae684
##
